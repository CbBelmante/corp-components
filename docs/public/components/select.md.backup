# Select

O componente `CorpSelect` é um select avançado com validação integrada, seleção múltipla com chips, normalização automática de items e sistema de clearable.

## Uso

Selects em sua forma mais simples contêm um label e uma lista de opções.

<CodePreview>
  <CorpSelect
    v-model="selectForm.frameworkUsage"
    name="frameworkUsage"
    :items="simpleFrameworks"
    label="Framework"
    placeholder="Escolha um framework"
  />

  <template #code>

```vue
<script setup>
import { ref } from 'vue'
import { CorpSelect } from 'corp-components'

const framework = ref('')
const frameworks = ['Vue', 'React', 'Angular', 'Svelte']
</script>

<template>
  <CorpSelect
    v-model="framework"
    name="framework"
    :items="frameworks"
    label="Framework"
    placeholder="Escolha um framework"
  />
</template>
```

  </template>
</CodePreview>

---

## Props

### Items

A prop `items` aceita dois formatos: **array de strings** ou **array de objetos** com `{value, label}`.

<CodePreview>
  <CorpSelect
    v-model="selectForm.status"
    name="status"
    :items="statusOptions"
    label="Status (array simples)"
    placeholder="Selecione o status"
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <!-- Array de strings -->
  <CorpSelect
    v-model="selectForm.status"
    name="status"
    :items="['Ativo', 'Inativo', 'Pendente']"
    label="Status"
  />

  <!-- Array de objetos -->
  <CorpSelect
    v-model="selectForm.state"
    name="state"
    :items="[
      { value: 'sp', label: 'São Paulo' },
      { value: 'rj', label: 'Rio de Janeiro' },
      { value: 'mg', label: 'Minas Gerais' }
    ]"
    label="Estado"
  />
</template>
```

  </template>
</CodePreview>

| Formato | Exemplo | v-model |
|---------|---------|---------|
| `string[]` | `['Vue', 'React']` | `'Vue'` |
| `{value, label}[]` | `[{value: 'vue', label: 'Vue'}]` | `'vue'` |

> **Normalização Automática:** Internamente, arrays simples são convertidos para `{value, label}` automaticamente.

### Multiple

Use `multiple` para habilitar seleção múltipla. O `v-model` passa a ser um array.

<CodePreview>
  <CorpSelect
    v-model="selectForm.multipleFrameworks"
    name="multipleFrameworks"
    :items="simpleFrameworks"
    label="Frameworks (seleção múltipla)"
    placeholder="Selecione múltiplos frameworks"
    multiple
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <CorpSelect
    v-model="selectForm.frameworks"
    name="frameworks"
    :items="['Vue', 'React', 'Angular', 'Svelte', 'Solid']"
    label="Frameworks"
    placeholder="Selecione múltiplos"
    multiple
  />
</template>
```

  </template>
</CodePreview>

> **Nota:** Com `multiple`, o valor do `v-model` é um array de strings/numbers.

### Chips

Combine `multiple` com `chips` para exibir os itens selecionados como badges removíveis.

<CodePreview>
  <CorpSelect
    v-model="selectForm.skills"
    name="skills"
    :items="skillsOptions"
    label="Skills (multiple com chips)"
    placeholder="Selecione suas habilidades"
    multiple
    chips
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <CorpSelect
    v-model="selectForm.skills"
    name="skills"
    :items="['TypeScript', 'JavaScript', 'Python', 'Go', 'Rust']"
    label="Skills"
    placeholder="Selecione suas habilidades"
    multiple
    chips
  />
</template>
```

  </template>
</CodePreview>

> **Interatividade:** Cada chip possui um botão X para remover o item individualmente.

### Clearable

Adiciona botão (X) para limpar a seleção rapidamente.

<CodePreview>
  <CorpSelect
    v-model="selectForm.frameworkClear"
    name="frameworkClear"
    :items="simpleFrameworks"
    label="Framework (clearable)"
    placeholder="Escolha um framework"
    clearable
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <!-- Single select clearable -->
  <CorpSelect
    v-model="selectForm.framework"
    name="framework"
    :items="['Vue', 'React', 'Angular']"
    label="Framework"
    clearable
  />

  <!-- Multiple clearable -->
  <CorpSelect
    v-model="selectForm.skills"
    name="skills"
    :items="['TypeScript', 'JavaScript', 'Python']"
    label="Skills"
    multiple
    chips
    clearable
  />
</template>
```

  </template>
</CodePreview>

> **Comportamento:** No single-select, limpa para `undefined`. No multiple, limpa para `[]`.

### Validation

Integração automática com `useForm` para validação. Detecta automaticamente se `rules` contém `required`.

<CodePreview>
  <CorpSelect
    v-model="selectForm.country"
    name="country"
    :items="countryOptions"
    label="País"
    :rules="[rules.required]"
    placeholder="Selecione seu país"
    hint="Campo obrigatório com validação"
    clearable
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <CorpSelect
    v-model="selectForm.country"
    name="country"
    :items="[
      { value: 'br', label: 'Brasil' },
      { value: 'us', label: 'Estados Unidos' }
    ]"
    label="País"
    :rules="[rules.required]"
    hint="Campo obrigatório"
    clearable
  />

  <CorpSelect
    v-model="selectForm.languages"
    name="languages"
    :items="[
      { value: 'pt', label: 'Português' },
      { value: 'en', label: 'Inglês' }
    ]"
    label="Idiomas"
    :rules="[rules.required]"
    multiple
    chips
    clearable
  />
</template>
```

  </template>
</CodePreview>

> **Auto-detect Required:** Se `rules` contém `required`, adiciona `*` vermelho no label automaticamente.

### Disabled & Readonly

Estados de desabilitado e somente leitura.

<CodePreview>
  <CorpSelect
    name="frameworkDisabled"
    :items="simpleFrameworks"
    label="Disabled"
    modelValue="Vue"
    disabled
    class="max-w-md"
  />

  <template #code>

```vue
<template>
  <CorpSelect
    v-model="selectForm.framework"
    name="framework"
    :items="simpleFrameworks"
    label="Disabled"
    disabled
  />

  <CorpSelect
    v-model="selectForm.framework"
    name="framework"
    :items="simpleFrameworks"
    label="Readonly"
    readonly
  />
</template>
```

  </template>
</CodePreview>

| Estado | Descrição |
|--------|-----------|
| `disabled` | Desabilita completamente (cinza, não clicável) |
| `readonly` | Somente leitura (não editável, mas mantém estilo normal) |

---

## Acessibilidade

O `CorpSelect` usa os primitivos do **reka-ui** que seguem as especificações **WAI-ARIA** para selects:

- ✅ Navegação por teclado (Arrow Up/Down, Enter, Escape)
- ✅ `aria-label` e `aria-describedby` aplicados automaticamente
- ✅ Estado de erro indicado via `aria-invalid`
- ✅ Foco visível com ring do Tailwind
- ✅ Label associado corretamente com `for` + `id`

---

## Exemplos Avançados

### Combo completo: Validation + Multiple + Chips + Clearable

<CodePreview>
  <CorpSelect
    v-model="selectForm.tags"
    name="tags"
    :items="frameworkOptions"
    label="Frameworks favoritos"
    :rules="validationRules"
    placeholder="Selecione seus frameworks favoritos"
    hint="Selecione no mínimo 2 frameworks"
    multiple
    chips
    clearable
    persistentHint
    class="max-w-md mb-4"
  />

  <button
    @click="validateSelectForm"
    class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"
  >
    Validar Formulário
  </button>

  <template #code>

```vue
<script setup>
import { CorpSelect, useForm, useValidationRules } from 'corp-components'

const rules = useValidationRules()
const { form, validateForm: validateFormFn } = useForm({
  initialValues: { frameworks: [] }
})

const frameworkOptions = [
  { value: 'vue', label: 'Vue.js' },
  { value: 'react', label: 'React' },
  { value: 'angular', label: 'Angular' },
  { value: 'svelte', label: 'Svelte' },
  { value: 'solid', label: 'Solid' },
  { value: 'qwik', label: 'Qwik' }
]

const validationRules = [
  rules.required,
  (value) => Array.isArray(value) && value.length >= 2 || 'Selecione pelo menos 2 frameworks'
]

const validateSelectForm = () => {
  const schema = { frameworks: validationRules }
  const isValid = validateFormFn(schema)

  if (isValid) {
    alert('✅ Formulário válido! Frameworks: ' + form.frameworks.join(', '))
  } else {
    alert('❌ Selecione pelo menos 2 frameworks!')
  }
}
</script>

<template>
  <CorpSelect
    v-model="selectForm.frameworks"
    name="frameworks"
    :items="frameworkOptions"
    label="Frameworks favoritos"
    :rules="validationRules"
    placeholder="Selecione seus frameworks"
    hint="Selecione no mínimo 2 frameworks"
    multiple
    chips
    clearable
    persistentHint
  />

  <button
    @click="validateSelectForm"
    class="px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90"
  >
    Validar Formulário
  </button>
</template>
```

  </template>
</CodePreview>

---


## API Reference

### Props

| Prop | Tipo | Default | Descrição |
|------|------|---------|-----------|
| `name` | `string` | **required** | Nome único do campo (usado para validação) |
| `items` | `string[]` \| `{value, label}[]` | **required** | Array de opções (strings ou objetos) |
| `label` | `string` | `''` | Label descritivo acima do select |
| `placeholder` | `string` | `'Selecione...'` | Texto quando nenhum item está selecionado |
| `modelValue` | `string` \| `number` \| `array` | `undefined` | Valor selecionado (v-model) |
| `hint` | `string` | `''` | Texto de ajuda abaixo do campo |
| `rules` | `ValidationRule[]` | `[]` | Regras de validação (useForm) |
| `disabled` | `boolean` | `false` | Desabilita o select |
| `readonly` | `boolean` | `false` | Modo somente leitura |
| `clearable` | `boolean` | `false` | Adiciona botão X para limpar |
| `multiple` | `boolean` | `false` | Habilita seleção múltipla |
| `chips` | `boolean` | `false` | Exibe selecionados como chips (requer multiple) |
| `hideDetails` | `boolean` | `false` | Esconde área de hint/erro |
| `persistentHint` | `boolean` | `false` | Mantém hint visível mesmo sem erro |
| `loading` | `boolean` | `false` | Estado de carregamento |
| `debug` | `boolean` | `false` | Modo debug (mostra áreas reservadas) |
| `class` | `string` \| `object` \| `array` | `undefined` | Classes CSS customizadas |

### Events

| Event | Payload | Descrição |
|-------|---------|-----------|
| `update:modelValue` | `string \| number \| array` | Emitido quando valor muda |

### Slots

O `CorpSelect` atualmente não expõe slots customizados. Para customizações avançadas, use os componentes primitivos do reka-ui diretamente.
